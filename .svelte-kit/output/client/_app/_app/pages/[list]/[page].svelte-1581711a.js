import{S as t,i as e,s,e as n,t as a,c as r,a as i,g as o,d as l,b as c,f as h,F as m,h as f,k as u,n as d,G as p,l as g,v,j as $,m as k,o as w,r as y,w as E,u as x,O as b,P as A,B as N}from"../../chunks/vendor-b0eb1977.js";function _(t){let e,s,u,d,p=t[0].domain+"";return{c(){e=n("small"),s=a("("),u=a(p),d=a(")"),this.h()},l(t){e=r(t,"SMALL",{class:!0});var n=i(e);s=o(n,"("),u=o(n,p),d=o(n,")"),n.forEach(l),this.h()},h(){c(e,"class","svelte-k6yna4")},m(t,n){h(t,e,n),m(e,s),m(e,u),m(e,d)},p(t,e){1&e&&p!==(p=t[0].domain+"")&&f(u,p)},d(t){t&&l(e)}}}function j(t){let e,s,p,g,v,$,k,w,y,E,x,b,A,N,_=t[0].points+"",j=t[0].user+"",L=t[0].time_ago+"",S=t[0].comments_count+"",H=1===t[0].comments_count?"comment":"comments";return{c(){e=n("p"),s=a(_),p=a(" points by\n\t\t\t"),g=n("a"),v=a(j),k=u(),w=a(L),y=a("\n\t\t\t | "),E=n("a"),x=a(S),b=u(),A=a(H),this.h()},l(t){e=r(t,"P",{class:!0});var n=i(e);s=o(n,_),p=o(n," points by\n\t\t\t"),g=r(n,"A",{"sveltekit:prefetch":!0,href:!0});var a=i(g);v=o(a,j),a.forEach(l),k=d(n),w=o(n,L),y=o(n,"\n\t\t\t | "),E=r(n,"A",{"sveltekit:prefetch":!0,href:!0});var c=i(E);x=o(c,S),b=d(c),A=o(c,H),c.forEach(l),n.forEach(l),this.h()},h(){c(g,"sveltekit:prefetch",""),c(g,"href",$="/user/"+t[0].user),c(E,"sveltekit:prefetch",""),c(E,"href",N="/item/"+t[0].id),c(e,"class","svelte-k6yna4")},m(t,n){h(t,e,n),m(e,s),m(e,p),m(e,g),m(g,v),m(e,k),m(e,w),m(e,y),m(e,E),m(E,x),m(E,b),m(E,A)},p(t,e){1&e&&_!==(_=t[0].points+"")&&f(s,_),1&e&&j!==(j=t[0].user+"")&&f(v,j),1&e&&$!==($="/user/"+t[0].user)&&c(g,"href",$),1&e&&L!==(L=t[0].time_ago+"")&&f(w,L),1&e&&S!==(S=t[0].comments_count+"")&&f(x,S),1&e&&H!==(H=1===t[0].comments_count?"comment":"comments")&&f(A,H),1&e&&N!==(N="/item/"+t[0].id)&&c(E,"href",N)},d(t){t&&l(e)}}}function L(t){let e,s,u=t[0].time_ago+"";return{c(){e=n("p"),s=a(u),this.h()},l(t){e=r(t,"P",{class:!0});var n=i(e);s=o(n,u),n.forEach(l),this.h()},h(){c(e,"class","svelte-k6yna4")},m(t,n){h(t,e,n),m(e,s)},p(t,e){1&e&&u!==(u=t[0].time_ago+"")&&f(s,u)},d(t){t&&l(e)}}}function S(t){let e,s,g,v,$,k,w,y,E,x,b=t[0].title+"",A=t[0].domain&&_(t);function N(t,e){return"job"===t[0].type?L:j}let S=N(t),H=S(t);return{c(){e=n("article"),s=n("h2"),g=n("a"),v=a(b),$=u(),A&&A.c(),w=u(),H.c(),y=u(),E=n("span"),x=a(t[1]),this.h()},l(n){e=r(n,"ARTICLE",{class:!0});var a=i(e);s=r(a,"H2",{class:!0});var c=i(s);g=r(c,"A",{href:!0,class:!0});var h=i(g);v=o(h,b),$=d(h),A&&A.l(h),h.forEach(l),c.forEach(l),w=d(a),H.l(a),y=d(a),E=r(a,"SPAN",{class:!0});var m=i(E);x=o(m,t[1]),m.forEach(l),a.forEach(l),this.h()},h(){c(g,"href",k=t[0].domain?t[0].url:`/item/${t[0].id}`),c(g,"class","svelte-k6yna4"),c(s,"class","svelte-k6yna4"),c(E,"class","index svelte-k6yna4"),c(e,"class","svelte-k6yna4")},m(t,n){h(t,e,n),m(e,s),m(s,g),m(g,v),m(g,$),A&&A.m(g,null),m(e,w),H.m(e,null),m(e,y),m(e,E),m(E,x)},p(t,[s]){1&s&&b!==(b=t[0].title+"")&&f(v,b),t[0].domain?A?A.p(t,s):(A=_(t),A.c(),A.m(g,null)):A&&(A.d(1),A=null),1&s&&k!==(k=t[0].domain?t[0].url:`/item/${t[0].id}`)&&c(g,"href",k),S===(S=N(t))&&H?H.p(t,s):(H.d(1),H=S(t),H&&(H.c(),H.m(e,y))),2&s&&f(x,t[1])},i:p,o:p,d(t){t&&l(e),A&&A.d(),H.d()}}}function H(t,e,s){let{item:n}=e,{index:a}=e;return t.$$set=t=>{"item"in t&&s(0,n=t.item),"index"in t&&s(1,a=t.index)},[n,a]}class M extends t{constructor(t){super(),e(this,t,H,S,s,{item:0,index:1})}}function P(t,e,s){const n=t.slice();return n[5]=e[s],n[7]=s,n}function B(t){let e,s;return e=new M({props:{item:t[5],index:t[2]+t[7]}}),{c(){$(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,n){w(e,t,n),s=!0},p(t,s){const n={};2&s&&(n.item=t[5]),4&s&&(n.index=t[2]+t[7]),e.$set(n)},i(t){s||(v(e.$$.fragment,t),s=!0)},o(t){y(e.$$.fragment,t),s=!1},d(t){E(e,t)}}}function T(t){let e,s,n=t[5]&&B(t);return{c(){n&&n.c(),e=g()},l(t){n&&n.l(t),e=g()},m(t,a){n&&n.m(t,a),h(t,e,a),s=!0},p(t,s){t[5]?n?(n.p(t,s),2&s&&v(n,1)):(n=B(t),n.c(),v(n,1),n.m(e.parentNode,e)):n&&(N(),y(n,1,1,(()=>{n=null})),x())},i(t){s||(v(n),s=!0)},o(t){y(n),s=!1},d(t){n&&n.d(t),t&&l(e)}}}function C(t){let e,s;return{c(){e=n("a"),s=a("More..."),this.h()},l(t){e=r(t,"A",{class:!0,href:!0});var n=i(e);s=o(n,"More..."),n.forEach(l),this.h()},h(){c(e,"class","more"),c(e,"href",t[3])},m(t,n){h(t,e,n),m(e,s)},p(t,s){8&s&&c(e,"href",t[3])},d(t){t&&l(e)}}}function F(t){let e,s,a,i,o,f,p=t[1],$=[];for(let n=0;n<p.length;n+=1)$[n]=T(P(t,p,n));const k=t=>y($[t],1,1,(()=>{$[t]=null}));let w=t[3]&&C(t);return{c(){e=n("meta"),a=u();for(let t=0;t<$.length;t+=1)$[t].c();i=u(),w&&w.c(),o=g(),this.h()},l(t){const s=b('[data-svelte="svelte-1ibktji"]',document.head);e=r(s,"META",{name:!0,content:!0}),s.forEach(l),a=d(t);for(let e=0;e<$.length;e+=1)$[e].l(t);i=d(t),w&&w.l(t),o=g(),this.h()},h(){document.title="Svelte Hacker News",c(e,"name","description"),c(e,"content",s="Latest Hacker News stories in the "+t[0]+" category")},m(t,s){m(document.head,e),h(t,a,s);for(let e=0;e<$.length;e+=1)$[e].m(t,s);h(t,i,s),w&&w.m(t,s),h(t,o,s),f=!0},p(t,[n]){if((!f||1&n&&s!==(s="Latest Hacker News stories in the "+t[0]+" category"))&&c(e,"content",s),6&n){let e;for(p=t[1],e=0;e<p.length;e+=1){const s=P(t,p,e);$[e]?($[e].p(s,n),v($[e],1)):($[e]=T(s),$[e].c(),v($[e],1),$[e].m(i.parentNode,i))}for(N(),e=p.length;e<$.length;e+=1)k(e);x()}t[3]?w?w.p(t,n):(w=C(t),w.c(),w.m(o.parentNode,o)):w&&(w.d(1),w=null)},i(t){if(!f){for(let t=0;t<p.length;t+=1)v($[t]);f=!0}},o(t){$=$.filter(Boolean);for(let e=0;e<$.length;e+=1)y($[e]);f=!1},d(t){l(e),t&&l(a),A($,t),t&&l(i),w&&w.d(t),t&&l(o)}}}const G=new Set(["news","newest","show","ask","jobs"]);async function I({page:{params:t},fetch:e}){const s="top"===t.list?"news":"new"===t.list?"newest":t.list;if(!G.has(s))return console.log("invalid"),{status:404,error:"Not found"};const n=+t.page,a=await e(`https://api.hnpwa.com/v0/${s}/${n}.json`);return{props:{page:n,list:s,items:await a.json()}}}function O(t,e,s){let n,a,{page:r}=e,{list:i}=e,{items:o}=e;return t.$$set=t=>{"page"in t&&s(4,r=t.page),"list"in t&&s(0,i=t.list),"items"in t&&s(1,o=t.items)},t.$$.update=()=>{16&t.$$.dirty&&s(2,n=1+30*(r-1)),17&t.$$.dirty&&s(3,a=`/${i}/${+r+1}`)},[i,o,n,a,r]}export default class extends t{constructor(t){super(),e(this,t,O,F,s,{page:4,list:0,items:1})}}export{I as load};
